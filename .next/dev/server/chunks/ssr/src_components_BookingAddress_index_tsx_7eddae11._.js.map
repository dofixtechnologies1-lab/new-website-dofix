{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/acer/Downloads/new-website-dofix/src/components/BookingAddress/index.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState, useRef } from \"react\";\r\nimport {\r\n  GoogleMap,\r\n  Marker,\r\n  useJsApiLoader,\r\n} from \"@react-google-maps/api\";\r\n\r\nconst containerStyle = {\r\n  width: \"100%\",\r\n  height: \"250px\",\r\n};\r\n\r\nconst defaultCenter = {\r\n  lat: 28.6139,\r\n  lng: 77.2090,\r\n};\r\n\r\nexport default function BookingAddressForm() {\r\n      const router = useRouter(); \r\n  const mapRef = useRef<google.maps.Map | null>(null);\r\n\r\n  const [position, setPosition] = useState(defaultCenter);\r\n  const [addressType, setAddressType] = useState(\"Home\");\r\n  const [loadingLocation, setLoadingLocation] = useState(false);\r\n\r\n  const [formData, setFormData] = useState({\r\n    fullAddress: \"\",\r\n    houseNo: \"\",\r\n    floor: \"\",\r\n    street: \"\",\r\n    country: \"India\",\r\n    state: \"Uttar Pradesh\",\r\n    pincode: \"\",\r\n  });\r\n\r\n  const { isLoaded } = useJsApiLoader({\r\n    googleMapsApiKey:\r\n      process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY as string,\r\n  });\r\n\r\n  // ðŸ”¥ Reverse Geocode\r\n  const fetchAddressFromLatLng = async (lat: number, lng: number) => {\r\n    const res = await fetch(\r\n      `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}`\r\n    );\r\n    console.log(process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY);\r\n    const data = await res.json();\r\n\r\n    if (data.results?.length > 0) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        fullAddress: data.results[0].formatted_address,\r\n      }));\r\n    }\r\n  };\r\n\r\n  // ðŸ“ Get Current Location\r\n  const getCurrentLocation = () => {\r\n    if (!navigator.geolocation) return;\r\n\r\n    setLoadingLocation(true);\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        const lat = pos.coords.latitude;\r\n        const lng = pos.coords.longitude;\r\n\r\n        const newPos = { lat, lng };\r\n\r\n        setPosition(newPos);\r\n\r\n        // ðŸ”¥ Smooth move instead of reload\r\n        if (mapRef.current) {\r\n          mapRef.current.panTo(newPos);\r\n        }\r\n\r\n        fetchAddressFromLatLng(lat, lng);\r\n        setLoadingLocation(false);\r\n      },\r\n      () => setLoadingLocation(false)\r\n    );\r\n  };\r\n\r\n  if (!isLoaded) return <p>Loading Map...</p>;\r\n\r\n return (\r\n  <div className=\"min-h-screen bg-gray-50 pt-45 pb-10 px-4\">\r\n    <div className=\"max-w-[800px] mx-auto bg-white rounded-3xl shadow-xl p-6 space-y-6\">\r\n\r\n      {/* Heading */}\r\n      <div>\r\n        <h2 className=\"text-2xl font-semibold text-gray-800\">\r\n         Address\r\n        </h2>\r\n        <p className=\"text-sm text-gray-500 mt-1\">\r\n          Choose your location and fill address details\r\n        </p>\r\n      </div>\r\n\r\n      {/* MAP */}\r\n      <div className=\"rounded-2xl overflow-hidden border\">\r\n        <GoogleMap\r\n          mapContainerStyle={{ width: \"100%\", height: \"220px\" }}\r\n          center={defaultCenter}\r\n          zoom={15}\r\n          onLoad={(map) => {\r\n            mapRef.current = map;\r\n        }}\r\n        >\r\n          <Marker\r\n            position={position}\r\n            draggable\r\n            onDragEnd={(e) => {\r\n              const lat = e.latLng?.lat() || 0;\r\n              const lng = e.latLng?.lng() || 0;\r\n              const newPos = { lat, lng };\r\n\r\n              setPosition(newPos);\r\n\r\n              if (mapRef.current) {\r\n                mapRef.current.panTo(newPos);\r\n              }\r\n\r\n              fetchAddressFromLatLng(lat, lng);\r\n            }}\r\n          />\r\n        </GoogleMap>\r\n      </div>\r\n\r\n      {/* Location Button */}\r\n      <button\r\n        onClick={getCurrentLocation}\r\n        className=\"w-full bg-[#3683ab] hover:bg-[#14455b] text-white py-3 rounded-xl font-medium transition\"\r\n      >\r\n        {loadingLocation ? \"Fetching location...\" : \"Use Current Location\"}\r\n      </button>\r\n\r\n      {/* Auto Address */}\r\n      <div>\r\n        <label className=\"text-sm font-medium text-gray-600\">\r\n          Detected Address\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          value={formData.fullAddress}\r\n          readOnly\r\n          className=\"mt-2 w-full border border-gray-300 bg-gray-100 p-3 rounded-xl text-sm\"\r\n        />\r\n      </div>\r\n\r\n      {/* Address Type */}\r\n      <div>\r\n        <label className=\"text-sm font-medium text-gray-600\">\r\n          Address Type\r\n        </label>\r\n\r\n        <div className=\"flex gap-4 mt-3\">\r\n          {[\"Home\", \"Office\", \"Other\"].map((type) => (\r\n            <button\r\n              key={type}\r\n              type=\"button\"\r\n              onClick={() => setAddressType(type)}\r\n              className={`flex-1 py-2 rounded-xl border text-sm font-medium transition ${\r\n                addressType === type\r\n                  ? \"bg-[#3683ab] text-white border-[#3683ab]\"\r\n                  : \"border-gray-300 text-gray-600\"\r\n              }`}\r\n            >\r\n              {type}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Manual Fields */}\r\n      <div className=\"space-y-4\">\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"House/Office No.\"\r\n          onChange={(e) =>\r\n            setFormData({ ...formData, houseNo: e.target.value })\r\n          }\r\n          className=\"w-full border border-gray-300 p-3 rounded-xl focus:ring-2 focus:ring-[#3683ab] outline-none\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Floor\"\r\n          onChange={(e) =>\r\n            setFormData({ ...formData, floor: e.target.value })\r\n          }\r\n          className=\"w-full border border-gray-300 p-3 rounded-xl focus:ring-2 focus:ring-[#3683ab] outline-none\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Street / Block / Area / Locality\"\r\n          onChange={(e) =>\r\n            setFormData({ ...formData, street: e.target.value })\r\n          }\r\n          className=\"w-full border border-gray-300 p-3 rounded-xl focus:ring-2 focus:ring-[#3683ab] outline-none\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          value=\"India\"\r\n          readOnly\r\n          className=\"w-full border border-gray-200 bg-gray-100 p-3 rounded-xl text-gray-500\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          value=\"Uttar Pradesh\"\r\n          readOnly\r\n          className=\"w-full border border-gray-200 bg-gray-100 p-3 rounded-xl text-gray-500\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Pincode\"\r\n          onChange={(e) =>\r\n            setFormData({ ...formData, pincode: e.target.value })\r\n          }\r\n          className=\"w-full border border-gray-300 p-3 rounded-xl focus:ring-2 focus:ring-[#3683ab] outline-none\"\r\n        />\r\n      </div>\r\n\r\n<button\r\n  onClick={() => router.push(\"/booking\")}\r\n  className=\"w-full bg-[#3683ab] hover:bg-[#14455b] text-white py-4 rounded-2xl font-semibold text-lg transition\"\r\n>\r\n  Add Address\r\n</button>\r\n\r\n    </div>\r\n  </div>\r\n);\r\n}"],"names":[],"mappings":"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"}}]
}